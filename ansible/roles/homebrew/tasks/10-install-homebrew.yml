---
- name: check brew
  shell: type brew
  register: type_brew
  failed_when: type_brew.rc not in [0, 1, 126, 127]
  changed_when: false
  check_mode: false

- name: install Homebrew
  shell: /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
  when: type_brew.rc != 0
