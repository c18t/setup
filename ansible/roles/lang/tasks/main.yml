---

- include: includes/set_fish_path.yml

- name: check anyenv
  shell: type anyenv
  args:
    executable: '{{ fish_path }}'
  changed_when: false
  check_mode: no

- include: includes/set_fish_user_paths.yml

- block:
  - include: languages/erlang.yml
    tags: erlang
  - include: languages/elixir.yml
    tags: elixir
  - include: languages/go.yml
    tags: go
  - include: languages/lua.yml
    tags: lua
  - include: languages/nim.yml
    tags: nim
  - include: languages/node.yml
    tags: node
  - include: languages/perl.yml
    tags: perl
  - include: languages/php.yml
    tags: php
  - include: languages/python.yml
    tags: python
  - include: languages/ruby.yml
    tags: ruby
  - include: languages/rust.yml
    tags: rust
  # NOTE: xenv系のコマンドが$(basename $SHELL)でシェルを判定することから
  #       ansibleを開始したシェルが$SHELLに入っていると失敗するため
  #       $SHELLを上書きする
  environment:
    SHELL: '{{ fish_path }}'
